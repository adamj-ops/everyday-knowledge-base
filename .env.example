# =============================================================================
# Outline Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your actual values.
# Never commit .env to version control - it contains secrets!
#
# Generate SECRET_KEY with: openssl rand -hex 32
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED: Core Configuration
# -----------------------------------------------------------------------------

# Environment: development, production, staging, or test
ENVIRONMENT=development

# Secret key for encrypting data (32-64 bytes hex)
# DO NOT CHANGE once set or users will be unable to login
# Generate with: openssl rand -hex 32
SECRET_KEY=

# Secret for cron utility endpoint to enable scheduled tasks
UTILS_SECRET=

# Fully qualified external-facing domain name (must include protocol)
# Examples: http://localhost:3000 (dev) or https://docs.example.com (prod)
URL=http://localhost:3000

# -----------------------------------------------------------------------------
# REQUIRED: Database Configuration
# -----------------------------------------------------------------------------

# Option 1: Use DATABASE_URL (recommended)
DATABASE_URL=postgresql://user:pass@localhost:5432/outline

# Option 2: Use individual components (alternative to DATABASE_URL)
# DATABASE_HOST=localhost
# DATABASE_PORT=5432
# DATABASE_NAME=outline
# DATABASE_USER=user
# DATABASE_PASSWORD=pass

# Optional: Database schema
# DATABASE_SCHEMA=public

# Optional: Database connection pool URL (for read replicas)
# DATABASE_CONNECTION_POOL_URL=postgresql://user:pass@localhost:5432/outline

# Optional: Connection pool settings
# DATABASE_CONNECTION_POOL_MIN=2
# DATABASE_CONNECTION_POOL_MAX=10

# Optional: PostgreSQL SSL mode (disable, allow, require, prefer, verify-ca, verify-full)
# PGSSLMODE=disable

# -----------------------------------------------------------------------------
# REQUIRED: Redis Configuration
# -----------------------------------------------------------------------------

# Redis URL for caching and queues
# Format: redis://[:password@]host[:port][/db-number]
REDIS_URL=redis://localhost:6379

# Optional: Redis URL for collaboration service (for horizontal scaling)
# If not set, collaboration service must run as singleton
# REDIS_COLLABORATION_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# File Storage Configuration
# -----------------------------------------------------------------------------

# Storage backend: "s3" or "local"
FILE_STORAGE=local

# For local storage: root directory path
FILE_STORAGE_LOCAL_ROOT_DIR=/var/lib/outline/data

# For S3 storage: AWS credentials and bucket
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION=us-east-1
# AWS_S3_UPLOAD_BUCKET_NAME=
# AWS_S3_UPLOAD_BUCKET_URL=
# AWS_S3_ACCELERATE_URL=
# AWS_S3_FORCE_PATH_STYLE=true
# AWS_S3_ACL=private

# File size limits (in bytes)
# FILE_STORAGE_UPLOAD_MAX_SIZE=1000000
# FILE_STORAGE_IMPORT_MAX_SIZE=1000000
# FILE_STORAGE_WORKSPACE_IMPORT_MAX_SIZE=1000000
# FILE_STORAGE_IMPORT_TIMEOUT=60000
# MAXIMUM_EXPORT_SIZE=

# -----------------------------------------------------------------------------
# Email Configuration (SMTP)
# -----------------------------------------------------------------------------

# Option 1: Use SMTP_HOST (custom SMTP server)
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USERNAME=user@example.com
# SMTP_PASSWORD=password
# SMTP_SECURE=true
# SMTP_FROM_EMAIL=noreply@example.com
# SMTP_REPLY_EMAIL=noreply@example.com
# SMTP_NAME=Outline

# Option 2: Use SMTP_SERVICE (well-known service like Gmail, SendGrid, etc.)
# See: https://community.nodemailer.com/2-0-0-beta/setup-smtp/well-known-services/
# SMTP_SERVICE=Gmail
# SMTP_USERNAME=user@gmail.com
# SMTP_PASSWORD=app-password
# SMTP_FROM_EMAIL=noreply@example.com

# Optional: SMTP TLS cipher override
# SMTP_TLS_CIPHERS=

# Note: Email is automatically enabled in development mode even without SMTP config

# -----------------------------------------------------------------------------
# Service Configuration
# -----------------------------------------------------------------------------

# Comma-separated list of services to run
# Options: web, worker, websockets, collaboration, admin, cron
# Default: collaboration,websockets,worker,web
SERVICES=collaboration,websockets,worker,web

# Port for the web server (default: 3000)
PORT=3000

# Optional: Collaboration service URL (if hosted on separate domain)
# COLLABORATION_URL=wss://collaboration.example.com

# Optional: Maximum clients per document (default: 100)
# COLLABORATION_MAX_CLIENTS_PER_DOCUMENT=100

# Worker concurrency settings
# WORKER_CONCURRENCY_EVENTS=10
# WORKER_CONCURRENCY_TASKS=10

# Web concurrency (divide available memory by 512MB for estimate)
# WEB_CONCURRENCY=

# Request timeout in milliseconds (default: 10000)
# REQUEST_TIMEOUT=10000

# -----------------------------------------------------------------------------
# OAuth / SSO Providers (Optional)
# -----------------------------------------------------------------------------

# Google OAuth
# GOOGLE_CLIENT_ID=
# GOOGLE_CLIENT_SECRET=
# ALLOWED_DOMAINS=example.com,another.com

# Slack OAuth
# SLACK_CLIENT_ID=
# SLACK_CLIENT_SECRET=
# SLACK_APP_ID=
# SLACK_VERIFICATION_TOKEN=
# SLACK_MESSAGE_ACTIONS=false

# GitHub OAuth
# GITHUB_CLIENT_ID=
# GITHUB_CLIENT_SECRET=
# GITHUB_APP_NAME=
# GITHUB_WEBHOOK_SECRET=
# GITHUB_APP_ID=
# GITHUB_APP_PRIVATE_KEY=

# Azure AD OAuth
# AZURE_CLIENT_ID=
# AZURE_CLIENT_SECRET=
# AZURE_TENANT_ID=
# AZURE_RESOURCE_APP_ID=

# OIDC (OpenID Connect) - Generic OAuth provider
# OIDC_CLIENT_ID=
# OIDC_CLIENT_SECRET=
# OIDC_ISSUER_URL=https://accounts.example.com
# OIDC_DISPLAY_NAME=OpenID Connect
# OIDC_AUTH_URI=https://accounts.example.com/oauth/authorize
# OIDC_TOKEN_URI=https://accounts.example.com/oauth/token
# OIDC_USERINFO_URI=https://accounts.example.com/oauth/userinfo
# OIDC_USERNAME_CLAIM=preferred_username
# OIDC_SCOPES=openid profile email

# Discord OAuth
# DISCORD_CLIENT_ID=
# DISCORD_CLIENT_SECRET=
# DISCORD_SERVER_ID=
# DISCORD_SERVER_ROLES=

# OAuth Provider Token Lifetimes (optional, defaults provided)
# OAUTH_PROVIDER_ACCESS_TOKEN_LIFETIME=3600
# OAUTH_PROVIDER_REFRESH_TOKEN_LIFETIME=2592000
# OAUTH_PROVIDER_AUTHORIZATION_CODE_LIFETIME=300

# -----------------------------------------------------------------------------
# CDN & Static Assets
# -----------------------------------------------------------------------------

# Optional: CDN URL for static assets (CloudFront, Cloudflare, etc.)
# CDN_URL=https://cdn.example.com

# -----------------------------------------------------------------------------
# Monitoring & Analytics (Optional)
# -----------------------------------------------------------------------------

# Sentry error tracking
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
# SENTRY_TUNNEL=https://tunnel.example.com
# RELEASE=

# Google Analytics
# GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX

# DataDog metrics
# DD_API_KEY=
# DD_SERVICE=outline

# Dropbox integration
# DROPBOX_APP_KEY=

# -----------------------------------------------------------------------------
# Security & Rate Limiting
# -----------------------------------------------------------------------------

# Enable rate limiter (default: false)
# RATE_LIMITER_ENABLED=false

# Rate limiter settings (only if RATE_LIMITER_ENABLED=true)
# RATE_LIMITER_REQUESTS=1000
# RATE_LIMITER_DURATION_WINDOW=60
# RATE_LIMITER_COLLABORATION_REQUESTS=50

# Optional: Comma-separated list of allowed private IP addresses
# Useful for OIDC providers or webhooks on private networks
# ALLOWED_PRIVATE_IP_ADDRESSES=10.0.0.1,192.168.1.100

# -----------------------------------------------------------------------------
# SSL/TLS Configuration (Production)
# -----------------------------------------------------------------------------

# Force HTTPS redirect (default: true in production)
# FORCE_HTTPS=true

# Optional: SSL certificate and key (base64 encoded)
# Only needed if Outline performs SSL termination
# SSL_KEY=
# SSL_CERT=

# -----------------------------------------------------------------------------
# Development & Debugging
# -----------------------------------------------------------------------------

# Debug categories (comma-separated)
# Options: http, database, * (all)
# DEBUG=

# Log level: error, warn, info, http, verbose, debug, silly
# LOG_LEVEL=info

# Enable unsafe-inline in script-src CSP (development only)
# DEVELOPMENT_UNSAFE_INLINE_CSP=false

# -----------------------------------------------------------------------------
# Localization
# -----------------------------------------------------------------------------

# Default interface language (see translate.getoutline.com for codes)
# DEFAULT_LANGUAGE=en_US

# -----------------------------------------------------------------------------
# Telemetry & Updates
# -----------------------------------------------------------------------------

# Send anonymized statistics to maintainers (default: true)
# TELEMETRY=true

# -----------------------------------------------------------------------------
# Webhooks & Integrations
# -----------------------------------------------------------------------------

# Webhook failure analysis settings
# WEBHOOK_FAILURE_TIME_WINDOW=86400
# WEBHOOK_FAILURE_RATE_THRESHOLD=80

# -----------------------------------------------------------------------------
# Notes
# -----------------------------------------------------------------------------
# - All values marked as REQUIRED must be set for the app to start
# - Values prefixed with # are optional and can be left commented out
# - For production, use a secrets manager (AWS Secrets Manager, HashiCorp Vault, etc.)
# - Never commit actual secrets to version control
# - See server/env.ts for complete documentation of all environment variables
